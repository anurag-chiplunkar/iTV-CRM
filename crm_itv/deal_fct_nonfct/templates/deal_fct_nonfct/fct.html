

{% block content %}
<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>

<div class="container">
	<div class="row">
		<div class="col align-self-start"></div>
		<div class="col align-self-center"><h1>Deal Details</h1></div>
		<div class="col align-self-end"></div>
	</div>
	<div class="row g-3 align-items-start">
		<div class="col-auto">
	    	<label class="col-form-label"><h5>FCT Details</h5></label> 
	  	</div>
	</div>
	<form method="POST">{% csrf_token %}
		<div class="row">
			
				<div class="col-2">
					<label for="dis_dd" class="form-control">Dispersion</label>
				</div>
				<div class="col-2">	
					<select class="form-select" id="dis_dd" name="dis_dd" onchange="showdiv()">
						<option value="">-------------</option>
						<option value="25%-25%-50%">25%-25%-50%</option>
						<option value="33%-33%-50%">33%-33%-33%</option>
						<option value="40%-20%-40%">40%-20%-40%</option>
						<option value="50%-50%">50%-50%</option>
					</select>
				</div>
				<div class="col-2"> 
					<label class="form-control">Prev Year Eff Rate</label>
				</div>
				<div class="col-2">
					<input type="text" class="form-control" name="prev">
				</div>
				<div class="col-2"> 
					<label class="form-control">Current Year Eff Rate</label>
				</div>
				<div class="col-2">
					<input type="text" class="form-control" name="current">
				</div>
				<div class="col-2"> 
					<label class="form-control">Channels</label>
				</div>
				<div class="col-2">
					<select class="form-select" id="channel">
						<option selected>---------------</option>
						<option value="INN">INN</option>
						<option value="NX">NX</option>
						<option value="IN UP">IN UP</option>
						<option value="MP">MP</option>
						<option value="RAJ">RAJ</option>
						<option value="PUN">PUN</option>
						<option value="HAR">HAR</option>
						<option value="GUJ">GUJ</option>
						<option value="NE NEWS">NE NEWS</option>
					</select>
				</div>
				
		</div>
		
		<div class="row g-3 align-items-start">
			<div class="col-2">
		    	<label class="col-form-label">Bands</label> 
		  	</div>
				  	
		  	<div class="col-2">
		  		<label class="col-form-label">FCT</label> 
		  	</div>
		  	<div class="col-2">
		  		<label class="col-form-label">Effective Rate</label> 
		  	</div>
		  	<div class="col-2">
		  		<label class="col-form-label">Base Rate</label> 
		  	</div>
		  
		  	<div class="col-2">
		  		<label class="col-form-label">Revenue</label> 
		  	</div>
			
		</div>
		<div class="row g-3 align-items-start" id="row1" style="display: none;">
			<div class="col-auto">
		    	<select name="band1" class="form-select" aria-label="Default select example">
				  <option selected>---------------</option>
				  <option value="0600-1200">0600-1200</option>
				  <option value="1200-1800">1200-1800</option>
				  <option value="1800-2400">1800-2400</option>
				</select>
		  	</div>
		  	
		  	<div class="col-auto">
		  		<input type="number" id="fct1" class="form-control" oninput="calculate1()">
		  	</div>
		  	<div class="col-auto">
		  		<input type="number" id="er1" class="form-control" oninput="calculate1()">
		  	</div>
		  	<div class="col-auto">
		  		<input type="number" id="base1" class="form-control" disabled readonly>
		  	</div>
		  	<div class="col-auto">
		  		<input type="number" id="rev1" class="form-control" oninput="sum()">
		  	</div>
		</div>
		<div class="row g-3 align-items-start" id="row2" style="display: none;">
			<div class="col-auto">
		    	<select name="band2" class="form-select" aria-label="Default select example">
				  <option selected>---------------</option>
				  <option value="0600-1200">0600-1200</option>
				  <option value="1200-1800">1200-1800</option>
				  <option value="1800-2400">1800-2400</option>
				</select>
		  	</div>
		  	
		  	<div class="col-auto">
		  		<input type="number" id="fct2" class="form-control" oninput="calculate2()">
		  	</div>
		  	<div class="col-auto">
		  		<input type="number" id="er2" class="form-control" oninput="calculate2()">
		  	</div>
		  	<div class="col-auto">
		  		<input type="number" id="base2" class="form-control" disabled readonly>
		  	</div>
		  	<div class="col-auto">
		  		<input type="number" id="rev2" class="form-control" oninput="sum()">
		  	</div>
		</div>
		<div class="row g-3 align-items-start" id="row3" style="display: none;">
			<div class="col-auto">
		    	<select name="band3" class="form-select" aria-label="Default select example">
				  <option selected>---------------</option>
				  <option value="0600-1200">0600-1200</option>
				  <option value="1200-1800">1200-1800</option>
				  <option value="1800-2400">1800-2400</option>
				</select>
		  	</div>
		  	
		  	<div class="col-auto">
		  		<input type="number" id="fct3" class="form-control" oninput="calculate3()">
		  	</div>
		  	<div class="col-auto">
		  		<input type="number" id="er3" class="form-control" oninput="calculate3()">
		  	</div>
		  	<div class="col-auto">
		  		<input type="number" id="base3" class="form-control" disabled readonly>
		  	</div>
		  	<div class="col-auto">
		  		<input type="number" id="rev3" class="form-control" oninput="sum()">
		  	</div>
		</div>

		<div class="row g-3 justify-content-center" id="row4" style="display:none;margin-left: 391px;">
						
	  		<div class="col-auto">
	  			<input type="button" class="btn btn-primary" value="Calculate Total FCT" onclick="sum()" style="">
	  		</div>
	  		<div class="col-auto">
	  			<input type="number" class="form-control" id="totalbox" >
	  		</div>
		</div>

		<div class="row g-3 align-items-start ">
			<div class="col-3" style="margin-top: 20px;">
				<button type="submit" class="btn btn-primary">Save Deal</button>
			</div>
		</div>
	</form>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous">	</script>

<script type="text/javascript">
	function showdiv(){
		var val = event.target.options[event.target.selectedIndex].value;
		if ((val === "25%-25%-50%") || (val === "33%-33%-33%") || (val === "40%-20%-40%")){
			console.log("yes");
			document.getElementById("row1").style.display = "flex";
			document.getElementById("row2").style.display = "flex";
			document.getElementById("row3").style.display = "flex";
			document.getElementById("row4").style.display = "flex";
		}
		if (val === "50%-50%"){
			document.getElementById("row1").style.display = "flex";
			document.getElementById("row2").style.display = "flex";
			document.getElementById('row3').style.display = "none";
			document.getElementById("row4").style.display = "flex";
		}
	}
	function calculate1 (){
    	var box1 = document.getElementById('fct1').value;
    	
    	var box2 = document.getElementById('er1').value;
    	
    	var result = document.getElementById('rev1');
    	var mul1 = (box1/10) * box2;
    	
    	result.value = mul1;

    }
    function calculate2 (){
    	var box21 = document.getElementById('fct2').value;
    	
    	var box22 = document.getElementById('er2').value;
    	
    	var result1 = document.getElementById('rev2');
    	var mul21 = (box21/10) * box22;
    	
    	result1.value = mul21;

    }
    function calculate3 (){
    	var box31 = document.getElementById('fct3').value;
    	
    	var box32 = document.getElementById('er3').value;
    	
    	var result2 = document.getElementById('rev3');
    	var mul31 = (box31/10) * box32;
    	
    	result2.value = mul31;

    }
    function sum(){
    	// var num1 = parseInt(document.getElementById('a_fct1').value);
    	// var num2 = parseInt(document.getElementById('a_fct2').value);
    	// var num3 = document.getElementById('a_fct3').value;
    	// var add = num1 + num2 + num3;
    	// console.log("i am in");
    	// console.log(add);
    	// document.getElementById('totalbox').value = add;
    	var first_number = parseInt(document.getElementById("rev1").value);
        var second_number = parseInt(document.getElementById("rev2").value);
        var third_number = parseInt(document.getElementById("rev3").value);
        var result = first_number + second_number + third_number;

        document.getElementById("totalbox").value = result;
    }
    var chan = document.getElementById('channel');
    if (chan!=null){
    	console.log("inside if");
    	chan.onchange = base;
    }
    function base(evt){
    	var list = '{{ master }}'
	    list_parse = new DOMParser().parseFromString(list, "text/html");
	    id_list = list_parse.documentElement.textContent;
	    id_list = JSON.parse(id_list);
	    console.log(id_list);
    }
    
</script>

</body>
</html>
{% endblock %}